

- name: install the latest version of python3
  yum:
    name: "{{ item }}"
    state: latest
  with_items: 
    - python3
    - python-pip

- pip:
    name: "{{ item }}"
    executable: pip-3.3
  with_items: 
    - virtualenv
    - Flask

- copy:
    src: /tmp/packer-ansible-provisioner/roles/application/files/pugsite.service
    dest: /etc/systemd/system/pugsite.service
    owner: root
    group: root
    mode: 0644

- copy:
    src: /tmp/packer-ansible-provisioner/roles/application/files/pugsite-start.sh
    dest: /pugsite/pugsite-start.sh
    owner: root
    group: root
    mode: 0644

#- name: Git checkout
#  ansible.builtin.git:
#    repo: 'https://foosball.example.org/path/to/repo.git'
#    dest: /srv/checkout
#    version: release-0.22